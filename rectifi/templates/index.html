{% extends "base.html" %}
{% load static %}

{% block content %}

<h1>{% block title %}Home{% endblock %}</h1>

<h2>Rectify Images</h2>
<form action="{% url 'rectifi:rectify' %}" method="post" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="row">
    <div class="seven columns">
      <label for="briefInput">Describe your scene</label>
      <input class="u-full-width" type="text" name="brief" id="briefInput" placeholder="Images of [scene] from my smartphone."/>
    </div>
    <div class="five columns">
      <label for="imagesInput">Images</label>
      <input class="u-full-width" type="file" multiple accept='image/*' name="images" id="imagesInput"/><br/>
    </div>
  </div>
<input class="button-primary" type="submit" value="Rectify!"/>
</form>

<hr />

<h2>Previous Requests</h2>
{% if latest_requests %}
  <ul>
  {% for request in latest_requests %}
    {% if request.brief|length > 0 %}
      <li><a href="{%  url 'rectifi:detail' request.id %}">{{ request.brief }}</a></li>
    {% else %}
      <li><a href="{%  url 'rectifi:detail' request.id %}">Rectify Request at {{ request.request_time }}</a></li>
    {% endif %}
  {% endfor %}
  </ul>
{% else %}
  <p>No polls are available.</p>
{% endif %}

{% endblock %}
